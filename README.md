# PokeYellowAI

PokeYellowAI aims to train reinforcement learning agents to play **Pokémon Yellow** using [Gym Retro](https://github.com/openai/retro).  The repository contains scripts for extracting static game data, a goal-based reward implementation, and a simple training loop using PPO.

## Prerequisites

- Python 3.8 or newer
- [gym-retro](https://github.com/openai/retro)
- [PyTorch](https://pytorch.org/)
- A legally obtained copy of *Pokémon Yellow* (`PokemonYellow.gbc`)

The bundled ROM is provided only for research convenience.  Ensure you own an original copy of the game before using it.

## Extracting Static Data

Some parts of the reward system rely on lookup tables for map IDs, item IDs and event flag offsets.  These can be generated by running:

```bash
python scripts/extract_static_data.py
```

The script expects `maps.asm`, `items.asm` and `ram_map.html` from the community disassembly project to be placed in the repository root.  It will create the following files under `data/`:

- `data/map_ids.json`
- `data/item_ids.json`
- `data/event_flags.json`

## Goal Definitions

Goal curricula are stored as JSON files inside the `data/` directory.  The repository provides `data/first_three_gyms.json` as an example, containing goals for reaching the first towns and defeating the first three gym leaders.

## Goal-Based Rewards

Rewards are produced by comparing consecutive WRAM snapshots.  Goals can trigger on map transitions or specific event flag bits (including badge flags).  Each goal entry contains:

- `id`: unique string identifier
- `type`: either `"map"` or `"event"`
- `target_id`: numeric map ID or flag index
- optional `reward` value and `prerequisites`

`poke_rewards.check_goals` takes two memory snapshots and returns the goals that were achieved in that frame.

## Training

Training uses a small PPO implementation found in `train_agent.py`.

First register the ROM with Gym Retro using the `retro.import` utility:

```bash
python -m retro.import PokemonYellow.gbc --output integrations
```

This creates `integrations/PokemonYellow-GB` containing the ROM and metadata.
You can then start training with:

```bash
python train_agent.py --retro-dir integrations --goals data/first_three_gyms.json
```

If you already imported the ROM into `~/.retro`, the `--retro-dir` argument can
be omitted. You may supply a different goals file using `--goals`. During
training, goals are unlocked gradually according to their prerequisites, forming
a simple curriculum.

